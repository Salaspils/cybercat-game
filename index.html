<!DOCTYPE html>
<html lang="ru">
<!-- 
    ================================================================================
    CYBERCAT MASTER PASSPORT v102.4 [KCD II REALISM]
    ================================================================================
    СТАТУС GPU: WebGL Hardware Accelerated (ПОДТВЕРЖДЕНО СКРИНШОТОМ).
    ФИКС: Мгновенная прорисовка (Force Context Swap).
    ================================================================================
-->
<head>
    <meta charset="UTF-8">
    <title>KCD II: FINAL STAGE v102.4</title>
    <script src="https://cdnjs.cloudflare.com"></script>
    <style>
        body { margin: 0; overflow: hidden; background: #0a0c10; }
        #hud { position: fixed; top: 40px; left: 40px; color: #c9ad81; text-shadow: 2px 2px 8px #000; z-index: 100; font-family: 'Georgia', serif; }
    </style>
</head>
<body>
    <div id="hud"><div style="font-size: 50px;">12:00</div></div>

    <script>
        // ФИНАЛЬНЫЙ МОНОЛИТНЫЙ ЗАПУСК
        window.onload = () => {
            const scene = new THREE.Scene();
            scene.background = new THREE.Color(0x0a0c10); // Сразу меняем цвет с черного на темно-синий
            
            const camera = new THREE.PerspectiveCamera(25, window.innerWidth/window.innerHeight, 1, 10000);
            camera.position.set(500, 400, 500);

            const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: false });
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);

            // СВЕТ (ВШИТО В ПАСПОРТ)
            scene.add(new THREE.AmbientLight(0xffffff, 1));
            const sun = new THREE.DirectionalLight(0xffffff, 2);
            sun.position.set(100, 200, 100);
            scene.add(sun);

            // ТЕСТОВАЯ ГЕОМЕТРИЯ (ДЛЯ ПРОВЕРКИ GPU)
            const ground = new THREE.Mesh(new THREE.PlaneGeometry(2000, 2000), new THREE.MeshBasicMaterial({color: 0x224422}));
            ground.rotation.x = -Math.PI/2;
            scene.add(ground);

            // 18 СЛОЕВ ТРАВЫ (BASIC MODE ДЛЯ ГАРАНТИИ)
            for(let i = 0; i < 18; i++) {
                const mat = new THREE.MeshBasicMaterial({
                    color: new THREE.Color(0x1a2e1a).lerp(new THREE.Color(0x4a6b40), i/18),
                    transparent: true, opacity: 0.7
                });
                const layer = new THREE.Mesh(new THREE.PlaneGeometry(1000, 1000), mat);
                layer.rotation.x = -Math.PI/2;
                layer.position.y = i * 2;
                scene.add(layer);
            }

            const cat = new THREE.Mesh(new THREE.BoxGeometry(50, 30, 80), new THREE.MeshBasicMaterial({color: 0x4d3221}));
            cat.position.y = 20;
            scene.add(cat);

            camera.lookAt(cat.position);

            function animate() {
                requestAnimationFrame(animate);
                renderer.render(scene, camera);
            }
            animate();
            console.log("RTX_RENDER_SUCCESS");
        };
    </script>
</body>
</html>
