
<!DOCTYPE html>
<html>
<head>
    <title>CyberCat: Wealth 2026</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="https://telegram.org"></script>
    <script src="https://cdnjs.cloudflare.com"></script>
    <script src="https://cdn.jsdelivr.net"></script>
    <style>
        body { margin: 0; background: #050505; overflow: hidden; font-family: 'Courier New', monospace; }
        #ui { position: absolute; top: 20px; width: 100%; text-align: center; color: #00ffcc; pointer-events: none; text-shadow: 0 0 10px #00ffcc; }
        .btn-shop { position: absolute; bottom: 30px; right: 20px; padding: 15px; background: rgba(0,255,204,0.2); border: 1px solid #00ffcc; color: white; pointer-events: auto; }
    </style>
</head>
<body>
    <div id="ui">
        <h1>$MEOW: <span id="balance">0.00</span></h1>
        <div id="status">НОЧЬ | ШТИЛЬ</div>
    </div>
    <button class="btn-shop" onclick="alert('Магазин откроется в @cybercat_global_2026')">LAVKA</button>

<script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    // 1. МИР И ТУМАН
    const scene = new THREE.Scene();
    scene.fog = new THREE.FogExp2(0x050510, 0.04);

    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.shadowMap.enabled = true;
    renderer.shadowMap.type = THREE.PCFSoftShadowMap;
    document.body.appendChild(renderer.domElement);

    // 2. СОЛНЦЕ И ЛУНА (Смена циклов)
    const sun = new THREE.DirectionalLight(0xffffff, 1);
    sun.position.set(10, 20, 10);
    sun.castShadow = true;
    sun.shadow.mapSize.width = 1024;
    scene.add(sun);
    scene.add(new THREE.AmbientLight(0x404040, 0.5));

    // 3. ЗВЕЗДНОЕ НЕБО (5000 точек)
    const starGeo = new THREE.BufferGeometry();
    const starPos = [];
    for(let i=0; i<5000; i++) starPos.push((Math.random()-0.5)*500, Math.random()*200, (Math.random()-0.5)*500);
    starGeo.setAttribute('position', new THREE.Float32BufferAttribute(starPos, 3));
    const stars = new THREE.Points(starGeo, new THREE.PointsMaterial({color: 0xffffff, size: 0.2}));
    scene.add(stars);

    // 4. ГРУНТ (Трава)
    const ground = new THREE.Mesh(new THREE.PlaneGeometry(100, 100), new THREE.MeshStandardMaterial({color: 0x101a10}));
    ground.rotation.x = -Math.PI/2;
    ground.receiveShadow = true;
    scene.add(ground);

    // 5. ЗАГРУЗКА ЖИЗНИ (Кот и Утки)
    const loader = new THREE.GLTFLoader();
    let cat;
    const ducks = [];

    // Заглушка, пока нет файлов:
    const catBox = new THREE.Mesh(new THREE.BoxGeometry(1,1,1), new THREE.MeshStandardMaterial({color: 0x00ffcc}));
    catBox.castShadow = true;
    scene.add(catBox);
    cat = catBox;

    camera.position.set(0, 5, 10);
    camera.lookAt(0, 0, 0);

    // 6. ИГРОВОЙ ЦИКЛ
    let balance = 0;
    let time = 0;

    function animate() {
        requestAnimationFrame(animate);
        time += 0.005;

        // День/Ночь
        sun.intensity = Math.max(0, Math.sin(time));
        sun.position.x = Math.cos(time) * 20;
        stars.material.opacity = sun.intensity > 0.2 ? 0 : 1;
        
        // Вращение кота (имитация жизни)
        cat.rotation.y += 0.01;
        
        renderer.render(scene, camera);
    }
    
    // Клик - майнинг
    window.addEventListener('click', () => {
        balance += 0.1;
        document.getElementById('balance').innerText = balance.toFixed(2);
        tg.HapticFeedback.impactOccurred('medium');
    });

    animate();
</script>
</body>
</html>
