<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>CyberCat v69.0: RTX 5070 Ti Beast Mode</title>
    <script src="three.min.js"></script>
    <style>
        body { margin: 0; overflow: hidden; background: #000; font-family: 'Segoe UI', sans-serif; }
        #ui { position: fixed; top: 20px; left: 20px; z-index: 100; pointer-events: none; }
        .hud { background: rgba(0,0,0,0.85); border: 2px solid #ffcc00; padding: 25px; border-radius: 4px; color: #fff; backdrop-filter: blur(20px); box-shadow: 0 0 50px rgba(255,204,0,0.2); }
        .btns { position: fixed; bottom: 30px; width: 100%; display: flex; justify-content: center; gap: 15px; pointer-events: auto; }
        .btn { background: #000; color: #ffcc00; border: 2px solid #ffcc00; padding: 15px 40px; cursor: pointer; font-weight: 900; text-transform: uppercase; letter-spacing: 3px; transition: 0.3s; }
        .btn:hover { background: #ffcc00; color: #000; box-shadow: 0 0 40px #ffcc00; transform: scale(1.05); }
        #clock { font-size: 38px; font-weight: 900; color: #ffcc00; }
        #spec-tag { font-size: 9px; color: #00ffcc; margin-top: 10px; letter-spacing: 2px; }
    </style>
</head>
<body>
    <div id="ui">
        <div class="hud">
            <div id="clock">12:00</div>
            <div style="font-size: 16px; margin-top:5px; color:#ffcc00;">$MEOW: <b id="bal">1000</b></div>
            <div id="spec-tag">SPEC: R7 5700G | RTX 5070 Ti | 32GB RAM</div>
        </div>
    </div>
    <div class="btns">
        <button class="btn" onclick="db.board = !db.board">üõπ –ë–£–°–¢</button>
        <button class="btn" onclick="buildHouse()">üèóÔ∏è –°–†–£–ë (900)</button>
        <button class="btn" onclick="location.reload()">üîÑ REBOOT</button>
    </div>

    <script>
        let db = JSON.parse(localStorage.getItem('cyber_v69')) || { 
            bal: 1000, builds: [], time: 1.5, board: false, pos: {x:0, z:0} 
        };

        const save = () => {
            localStorage.setItem('cyber_v69', JSON.stringify(db));
            document.getElementById('bal').innerText = Math.floor(db.bal);
        };

        function init() {
            const scene = new THREE.Scene();
            scene.background = new THREE.Color(0xaaccff);
            scene.fog = new THREE.FogExp2(0xaaccff, 0.0012);

            const camera = new THREE.PerspectiveCamera(45, window.innerWidth/window.innerHeight, 1, 8000);
            const renderer = new THREE.WebGLRenderer({ 
                antialias: true, 
                powerPreference: "high-performance",
                precision: "highp" // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –¥–ª—è RTX
            });
            
            renderer.setPixelRatio(window.devicePixelRatio);
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.toneMapping = THREE.ACESFilmicToneMapping;
            renderer.toneMappingExposure = 1.4;
            renderer.outputEncoding = THREE.sRGBEncoding;
            
            // ULTRA SHADOWS (8K Maps)
            renderer.shadowMap.enabled = true;
            renderer.shadowMap.type = THREE.PCFSoftShadowMap;
            document.body.appendChild(renderer.domElement);

            // –ö–ò–ù–ï–ú–ê–¢–û–ì–†–ê–§–ò–ß–ù–´–ô –°–í–ï–¢
            const sun = new THREE.DirectionalLight(0xfff5e6, 2.5);
            sun.position.set(400, 600, 100);
            sun.castShadow = true;
            sun.shadow.mapSize.set(8192, 8192); // 8K —Ç–µ–Ω–∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –ø–æ–¥ —Ç–≤–æ–π –∫–æ–Ω—Ñ–∏–≥
            scene.add(sun);
            scene.add(new THREE.AmbientLight(0xccddee, 0.8));

            const ground = new THREE.Mesh(
                new THREE.PlaneGeometry(5000, 5000), 
                new THREE.MeshStandardMaterial({ color: 0x1a2414, roughness: 0.8, metalness: 0.1 })
            );
            ground.rotation.x = -Math.PI/2; ground.receiveShadow = true; scene.add(ground);

            const cat = new THREE.Group();
            const catMat = new THREE.MeshStandardMaterial({ color: 0x111111, roughness: 0.3, metalness: 0.8 });
            const body = new THREE.Mesh(new THREE.CylinderGeometry(1, 1.2, 3.5, 32), catMat);
            body.rotation.z = Math.PI/2; body.position.y = 1.5; body.castShadow = true; cat.add(body);
            const head = new THREE.Mesh(new THREE.SphereGeometry(1.2, 32, 32), catMat);
            head.position.set(2, 2.2, 0); cat.add(head);
            cat.position.set(db.pos.x, 0, db.pos.z);
            scene.add(cat);
            
            let target = new THREE.Vector3(db.pos.x, 0, db.pos.z);

            function createHouse(pos) {
                const s = new THREE.Group();
                const logMat = new THREE.MeshStandardMaterial({ color: 0x3d2b1f, roughness: 0.7, metalness: 0.1 });
                for(let i=0; i<10; i++) {
                    const log = new THREE.Mesh(new THREE.CylinderGeometry(0.75, 0.75, 18, 32), logMat);
                    log.rotation.z = Math.PI/2; log.position.y = i * 1.4; log.rotation.y = (i%2)*Math.PI/2;
                    log.castShadow = true; log.receiveShadow = true; s.add(log);
                }
                s.position.set(pos.x, 0.5, pos.z); scene.add(s);
            }
            db.builds.forEach(p => createHouse(p));

            window.buildHouse = () => {
                if(db.bal >= 900) {
                    db.bal -= 900; const p = {x: cat.position.x, z: cat.position.z};
                    db.builds.push(p); createHouse(p); save();
                }
            };

            window.addEventListener('pointerdown', (e) => {
                const m = new THREE.Vector2((e.clientX/window.innerWidth)*2-1, -(e.clientY/window.innerHeight)*2+1);
                const ray = new THREE.Raycaster(); ray.setFromCamera(m, camera);
                const hit = new THREE.Vector3();
                if(ray.ray.intersectPlane(new THREE.Plane(new THREE.Vector3(0,1,0), 0), hit)) target.copy(hit);
            });

            function animate() {
                requestAnimationFrame(animate);
                db.time += 0.00004;
                let dayScale = (db.time % (Math.PI*2)) / (Math.PI*2);
                document.getElementById('clock').innerText = Math.floor(dayScale * 24).toString().padStart(2, '0') + ":" + Math.floor((dayScale * 1440) % 60).toString().padStart(2, '0');
                
                cat.position.lerp(target, db.board ? 0.3 : 0.08);
                if(cat.position.distanceTo(target) > 1.5) cat.lookAt(target.x, 1.5, target.z);
                
                db.pos.x = cat.position.x; db.pos.z = cat.position.z;
                
                const camTarget = new THREE.Vector3(cat.position.x - 90, 60, cat.position.z + 100);
                camera.position.lerp(camTarget, 0.04);
                camera.lookAt(cat.position.x, 10, cat.position.z);
                
                renderer.render(scene, camera);
                save();
            }
            animate();
        }
        if (typeof THREE !== 'undefined') init();
    </script>
</body>
</html>
